<html>
<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

	<script src="/support/riot.min.js"></script>
	<script src="/bundles/v2.debug.js"></script>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		h1{
			text-align: center;
			font-family: 'Helvetica Neue', "Helvetica";
			font-weight: 100;
		}
	</style>
</head>
<body>
  <div class="tf-slide-deck">
  </div>
	<div class="tf-personality-blend">
	</div>
  <div class="tf-personality-types">
  </div>
  <div class="tf-personality-traits">
  </div>
	<div class="tf-famous-people">
  </div>
	<div class="tf-career">
	</div>
	<div class="tf-careers">
	</div>
  <script>
	    $(function(){
	      $.post("http://localhost:1376/credentials").then(function(credentials){
					function loadAssessment(credentials){
						Traitify.setHost(credentials.host);
						Traitify.setVersion("v1");
						Traitify.setPublicKey(credentials.publicKey);

						window.traitify = Traitify.ui.init()
						window.traitify.assessmentId = $.cookie("assessmentId")
						window.traitify.slideDeck[0].on("initialized", function(){
							console.log("initialized")
						}).on("addSlide", function(){
							console.log("addSlide")
						})
						window.traitify.load()
					}
					if($.cookie("assessmentId")){
						loadAssessment(credentials)
					} else {
		        $.post("http://localhost:1376/assessments?deck=career-deck").then(function(assessment){
							$.cookie("assessmentId", assessment.id)
							loadAssessment(credentials)
		        })
					}
	      })
	    })
  </script>
</body>
</html>
